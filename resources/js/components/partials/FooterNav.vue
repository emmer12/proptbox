<template>
   <div v-if="!onBoarding || user">
     <div class="spacer" style="height:120px"></div>
   <div class="footer-container d-sm-none" id="foot-nav">
    <router-link tag="div" :class="{active:$route.name=='home'}" :to="{name:'home'}">
    <svg width="27" height="29" viewBox="0 0 29 27" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
      <path
        d="M28.3998 13.2788L15.2235 0.29569C15.1287 0.201957 15.016 0.127593 14.8919 0.0768548C14.7679 0.0261165 14.6349 0 14.5006 0C14.3663 0 14.2333 0.0261165 14.1093 0.0768548C13.9852 0.127593 13.8725 0.201957 13.7776 0.29569L0.601393 13.2788C0.217525 13.6573 0 14.1715 0 14.7077C0 15.8212 0.918083 16.7264 2.04729 16.7264H3.43562V25.9906C3.43562 26.5489 3.89306 27 4.45926 27H12.4533V19.9344H16.0361V27H24.5419C25.1081 27 25.5656 26.5489 25.5656 25.9906V16.7264H26.9539C27.4977 16.7264 28.0191 16.5151 28.403 16.1334C29.1995 15.3449 29.1995 14.0674 28.3998 13.2788Z"
        fill-rule="evenodd"
      />
    </svg>
     <div>Home</div>
    </router-link>

    <!-- Listings -->

    <router-link tag="div" :class="{active:$route.name=='list'}" :to="{name:'list'}">
    <svg width="27" height="29" viewBox="0 0 27 30"  fill="currentColor" xmlns="http://www.w3.org/2000/svg">
     
      <path
        d="M2.26776 16.9015L11.8162 28.5446C12.6517 29.5149 13.6265 30 14.7404 30C15.7351 30 16.5905 29.6968 17.3066 29.0904L25.6018 21.9954C26.3975 21.2677 26.8551 20.3581 26.9744 19.2665C27.0938 18.2558 26.7954 17.2654 26.0793 16.2951L16.5308 4.65204C15.4964 3.27751 14.1437 2.40832 12.4727 2.04447L4.17745 0.103956C3.38175 -0.138608 2.62583 0.0433151 1.90969 0.649726L0.895169 1.55934C0.29839 2.00404 0 2.73174 0 3.74242L0.477423 12.4141C0.67635 14.1525 1.27313 15.6483 2.26776 16.9015ZM3.70003 2.59024L12.1146 4.65204C12.9899 4.85417 13.8652 5.39994 14.7404 6.28934L24.2889 17.9324C24.6072 18.2558 24.7067 18.6197 24.5873 19.024C24.5873 19.2665 24.4083 19.6102 24.0502 20.0549L15.755 27.1499C15.4765 27.3924 15.1383 27.5036 14.7404 27.4834C14.3426 27.4632 14.0442 27.3116 13.8453 27.0286L4.29681 15.3855C3.54089 14.4152 3.16293 13.4248 3.16293 12.4141L2.56615 3.49986L3.70003 2.59024ZM7.10167 6.83511C7.10167 7.19896 6.98232 7.50217 6.74361 7.74473C6.50489 7.98729 6.2065 8.10858 5.84844 8.10858C5.49037 8.10858 5.19198 7.98729 4.95327 7.74473C4.71456 7.50217 4.5952 7.19896 4.5952 6.83511C4.5952 6.47127 4.71456 6.16806 4.95327 5.9255C5.19198 5.68293 5.49037 5.56165 5.84844 5.56165C6.2065 5.56165 6.50489 5.68293 6.74361 5.9255C6.98232 6.16806 7.10167 6.47127 7.10167 6.83511ZM7.75813 15.8706L19.455 19.6304H19.8727C20.4297 19.6304 20.8475 19.3272 21.126 18.7208C21.2453 18.3973 21.2255 18.0739 21.0663 17.7505C20.9072 17.4271 20.6685 17.2047 20.3502 17.0835L8.6533 13.3237C8.33502 13.162 8.00679 13.162 7.66861 13.3237C7.33044 13.4854 7.10167 13.728 6.98232 14.0514C6.74361 14.9812 7.00221 15.5876 7.75813 15.8706ZM17.3066 21.6922C17.3066 22.2177 17.1276 22.6725 16.7695 23.0566C16.4114 23.4407 15.9539 23.6327 15.3969 23.6327C14.8399 23.6327 14.3824 23.4407 14.0243 23.0566C13.6662 22.6725 13.4872 22.2177 13.4872 21.6922C13.4872 21.1666 13.6762 20.7118 14.0542 20.3278C14.4321 19.9437 14.8797 19.7517 15.3969 19.7517C15.9141 19.7517 16.3617 19.9437 16.7397 20.3278C17.1176 20.7118 17.3066 21.1666 17.3066 21.6922ZM13.4872 11.3832C13.4872 11.9087 13.2982 12.3636 12.9203 12.7476C12.5423 13.1317 12.0947 13.3237 11.5775 13.3237C11.0603 13.3237 10.6127 13.1317 10.2348 12.7476C9.8568 12.3636 9.66782 11.9087 9.66782 11.3832C9.66782 10.8576 9.84686 10.4028 10.2049 10.0188C10.563 9.63471 11.0205 9.44268 11.5775 9.44268C12.1345 9.44268 12.592 9.63471 12.9501 10.0188C13.3082 10.4028 13.4872 10.8576 13.4872 11.3832Z"
        fill-rule="evenodd" 
      />
    </svg>
    <div>Listings</div>
    </router-link>

    <!-- Request -->

    <router-link tag="div" :class="{active:$route.name=='request'}" :to="{name:'request'}">
    <svg width="27" height="29" viewBox="0 0 33 32" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
      <path
        d="M32.3749 7.25273L17.0338 0.100814C16.8857 0.0326264 16.724 -0.0018047 16.5607 7.2862e-05C16.3973 0.00195042 16.2365 0.0400885 16.0901 0.111661C15.9437 0.183233 15.8155 0.286404 15.715 0.413528C15.6145 0.540652 15.5442 0.688469 15.5095 0.846025C15.5059 0.857705 14.2787 6.48766 12.4562 12.1001C11.8349 14.0239 11.139 15.9254 10.4123 17.5957L12.3828 18.5138C14.7497 13.0918 16.6243 5.60696 17.3296 2.61327L30.6636 8.8214C30.2541 10.5886 29.2044 14.9221 27.7996 19.2485C26.8919 22.0518 25.8292 24.8516 24.7404 26.8781C23.6871 28.9689 22.4232 29.9968 22.1404 29.859C20.4599 29.894 19.2788 28.3849 18.4835 26.4506C18.149 25.5997 17.8889 24.722 17.706 23.8272C17.5545 23.1054 17.5083 22.6522 17.5048 22.6522C17.4859 22.4696 17.4193 22.295 17.3114 22.1455C17.2035 21.996 17.0581 21.8768 16.8894 21.7995L1.55183 14.6511C1.37709 14.5697 1.18362 14.5355 0.991121 14.5519C0.798623 14.5683 0.613968 14.6348 0.455953 14.7445C0.298856 14.8553 0.174418 15.0053 0.0953942 15.1791C0.01637 15.353 -0.014399 15.5444 0.00624048 15.7339C0.0157081 15.7876 0.237014 17.8947 1.12697 20.0988C1.74473 21.6406 2.79209 23.3904 4.49508 24.2746L19.8279 31.4347L19.835 31.4207C20.5001 31.7652 21.2551 31.9895 22.1392 32C24.2659 31.8633 25.4256 30.0517 26.6576 27.8827C30.208 21.2365 32.9536 8.49319 32.9749 8.44646C33.0274 8.21054 32.997 7.96398 32.8886 7.74742C32.7801 7.53086 32.6002 7.3572 32.3784 7.25506L32.3749 7.25273Z"
       fill-rule="evenodd"
      />
    </svg>
    <div>Requests</div>
    </router-link>

    <!-- Profile -->

    <router-link tag="div" :class="{active:$route.name=='my.listing'}" :to="{name:'my.listing'}">
    <svg width="27" height="29" viewBox="0 0 30 30" fill="currentCo]lor" xmlns="http://www.w3.org/2000/svg">
      <path
        d="M15 0.125C12.058 0.125 9.18207 0.997404 6.73589 2.63189C4.28971 4.26638 2.38314 6.58953 1.25729 9.30758C0.131437 12.0256 -0.163137 15.0165 0.410818 17.902C0.984773 20.7874 2.40148 23.4379 4.48179 25.5182C6.56209 27.5985 9.21256 29.0152 12.098 29.5892C14.9835 30.1631 17.9744 29.8686 20.6924 28.7427C23.4105 27.6169 25.7336 25.7103 27.3681 23.2641C29.0026 20.8179 29.875 17.942 29.875 15C29.875 11.0549 28.3078 7.27139 25.5182 4.48179C22.7286 1.69218 18.9451 0.125 15 0.125ZM15 5.4375C15.9456 5.4375 16.87 5.71792 17.6563 6.24329C18.4426 6.76866 19.0554 7.51539 19.4173 8.38904C19.7792 9.2627 19.8739 10.2241 19.6894 11.1515C19.5049 12.079 19.0495 12.9309 18.3809 13.5996C17.7122 14.2683 16.8602 14.7236 15.9328 14.9081C15.0053 15.0926 14.044 14.9979 13.1703 14.636C12.2966 14.2742 11.5499 13.6613 11.0245 12.8751C10.4992 12.0888 10.2187 11.1644 10.2187 10.2188C10.2173 9.59047 10.3401 8.96811 10.5798 8.38739C10.8196 7.80667 11.1718 7.27903 11.616 6.83477C12.0603 6.39051 12.5879 6.03838 13.1686 5.7986C13.7494 5.55881 14.3717 5.4361 15 5.4375ZM23.5 24.4775C21.17 26.5837 18.1409 27.7499 15 27.7499C11.8591 27.7499 8.83004 26.5837 6.5 24.4775V23.8612C6.45976 22.4065 6.99514 20.9946 7.98984 19.9322C8.98454 18.8699 10.3582 18.2429 11.8125 18.1875H18.1875C19.6352 18.2456 21.0024 18.869 21.9956 19.9238C22.9889 20.9786 23.529 22.3808 23.5 23.8294V24.4775Z"
        fill-rule="evenodd"
      />
    </svg>
      <span v-if="notify && notify.length">{{ notify.length}}</span>
      <div>Profile</div>
    </router-link>

      <!-- <router-link :to="{name:'chats'}" :class="{active:$route.name=='chats'}" tag="div">
      <svg width="33" height="32" viewBox="0 0 16 16" class="bi bi-chat-text" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
      <path fill-rule="evenodd" d="M2.678 11.894a1 1 0 0 1 .287.801 10.97 10.97 0 0 1-.398 2c1.395-.323 2.247-.697 2.634-.893a1 1 0 0 1 .71-.074A8.06 8.06 0 0 0 8 14c3.996 0 7-2.807 7-6 0-3.192-3.004-6-7-6S1 4.808 1 8c0 1.468.617 2.83 1.678 3.894zm-.493 3.905a21.682 21.682 0 0 1-.713.129c-.2.032-.352-.176-.273-.362a9.68 9.68 0 0 0 .244-.637l.003-.01c.248-.72.45-1.548.524-2.319C.743 11.37 0 9.76 0 8c0-3.866 3.582-7 8-7s8 3.134 8 7-3.582 7-8 7a9.06 9.06 0 0 1-2.347-.306c-.52.263-1.639.742-3.468 1.105z"/>
      <path fill-rule="evenodd" d="M4 5.5a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zM4 8a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7A.5.5 0 0 1 4 8zm0 2.5a.5.5 0 0 1 .5-.5h4a.5.5 0 0 1 0 1h-4a.5.5 0 0 1-.5-.5z"/>
       <span v-if="notify && notify.length">{{ notify.length}}</span>
  </svg>
       <div>Messages</div>
    </router-link>
      
    <router-link :to="{name:'explore'}" tag="div" :class="{active:$route.name=='explore'}">
       <svg width="33" height="32" viewBox="0 0 16 16" class="bi bi-question-circle-fill" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
          <path fill-rule="evenodd" d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM5.496 6.033a.237.237 0 0 1-.24-.247C5.35 4.091 6.737 3.5 8.005 3.5c1.396 0 2.672.73 2.672 2.24 0 1.08-.635 1.594-1.244 2.057-.737.559-1.01.768-1.01 1.486v.105a.25.25 0 0 1-.25.25h-.81a.25.25 0 0 1-.25-.246l-.004-.217c-.038-.927.495-1.498 1.168-1.987.59-.444.965-.736.965-1.371 0-.825-.628-1.168-1.314-1.168-.803 0-1.253.478-1.342 1.134-.018.137-.128.25-.266.25h-.825zm2.325 6.443c-.584 0-1.009-.394-1.009-.927 0-.552.425-.94 1.01-.94.609 0 1.028.388 1.028.94 0 .533-.42.927-1.029.927z"/>
       </svg>
       <div>More</div>
    </router-link>  -->

  </div>
   </div>
</template>

<script>
export default {
  data() {
    return {
       direction: 0,
       prevDirection:0,
       prevScroll: window.scrollY || document.documentElement.scrollTop
    }
  },
  methods: {
    checkScroll:function() {
    /*
    ** Find the direction of scroll
    ** 0 - initial, 1 - up, 2 - down
    */

    let curScroll = window.scrollY ||  document.documentElement.scrollTop;
   
   if (curScroll > this.prevScroll) { 
      //scrolled up
      this.direction = 2;


    }
    else if (curScroll < this.prevScroll) { 
      //scrolled down
      
      this.direction = 1;
    }

    if (this.direction !== this.prevDirection) {
      this.toggleHeader(this.direction, curScroll);
    }
  
    this.prevScroll = curScroll;
  },

  toggleHeader:function(direction, curScroll) {
    var header = document.getElementById('foot-nav');
    if (direction === 2 && curScroll > 70) { 
      //replace 52 with the height of your header in px

      header.classList.add('hide');
      this.prevDirection = direction;
    }
    else if (direction === 1) {
      header.classList.remove('hide');
      this.prevDirection = direction;
    }
  }
  },
  created () {
  window.addEventListener('scroll', this.checkScroll);
  },

  computed: {
    user(){
      return this.$store.getters.user
    },
    onBoarding(){
      return this.$store.getters.onBoarding
    },
    notify(){
      if (this.$store.getters.user) {
        let not=this.$store.getters.user.notifications
        return not.filter(notif=>!notif.read_at)
      }

    }
  },
};
</script>

<style lang="scss" scoped>
.footer-container{
    display: flex;
    justify-content: space-between;
    position: fixed;
    bottom: 0px;
    background: white;
    width: 100%;
    padding: 15px 20px;
    box-shadow: -10px 2px 15px #888;
    z-index:999;
    transition: all .3s ease;
    text-align: center;



    a:hover{
      text-decoration:none
    }

    &.hide{
      bottom:-100px
    }

    div{
          fill: #c4c4c4;
      position:relative;
      color:#c4c4c4;
      &.active{
        path{
          fill:#5895F9;
        }  
        div{
         color:#5895F9;
        }
      }
        i.active{
          color:#5895F9
        }
      
      i{
        color: #c4c4c4;
       font-size: 33px;
      }

      span{
        height:20px;
        width:20px;
        border-radius:50%;
        background:#F44336;
        color:white;
        position:absolute; 
        top:-10px;
        right:-8px;
        line-height:20px;
        text-align:center
         }
    }
}
</style>
